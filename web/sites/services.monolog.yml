# Local development services.
#
# To activate this feature, follow the instructions at the top of the
# 'example.settings.local.php' file, which sits next to this file.
parameters:
  monolog.channel_handlers:
    default: ['graylog2', 'drupal.dblog', 'error_log']

services:
  monolog.handler.graylog2:
    class: Monolog\Handler\GelfHandler
    arguments:
      - '@gelf.publisher'
      - 'debug' #monolog config is ignored with custom service level has to be redefined here (default : debug), you should probably use parameters eg: '%gelf_level%'

  gelf.publisher:
    class: Gelf\Publisher
    arguments:
      - '@gelf.ignore_error_transport'

  gelf.ignore_error_transport:
    class: Gelf\Transport\IgnoreErrorTransportWrapper
    arguments:
      - '@gelf.transport'

  gelf.transport:
    class: Gelf\Transport\UdpTransport # or Tcp, Amp, Http,...
    arguments:
      - 'graylog'
